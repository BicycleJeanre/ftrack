{
    "mainGrid": {
        "actions": {
            "add": true,
            "edit": true,
            "delete": true,
            "save": true
        },
        "columns": [
            {
                "field": "id",
                "header": "ID",
                "editable": false,
                "type": "number",
                "display": false
            },
            {
                "field": "name",
                "header": "Account Name",
                "editable": true,
                "type": "text",
                "display": true
            },
            {
                "field": "type",
                "header": "Type",
                "editable": true,
                "type": "select",
                "optionsSource": "accountType",
                "default": "asset",
                "display": true
            },
            {
                "field": "currency",
                "header": "Currency",
                "editable": true,
                "type": "select",
                "default": "ZAR",
                "optionsSource": "currencies",
                "display": true
            },
            {
                "field": "balance",
                "header": "Starting Balance",
                "editable": true,
                "type": "number",
                "display": true
            },
            {
                "field": "current_balance",
                "header": "Current Balance",
                "editable": false,
                "type": "number",
                "display": true
            },
            {
                "field": "interest",
                "displayType": "custom lookup",
                "customDisplay": "interest.presetOption",
                "display": true,
                "header": "Interest",
                "editable": true,
                "type": "modal",
                "modal": "interestModal",
                "modalIcon": "interest",
                "modalIconTitle": "Edit Interest"  
            }
        ]
    },
    "accountType": [
        "Asset",
        "Liability",
        "Equity",
        "Income",
        "Expense"
    ],
    "currencies": [
        "ZAR",
        "USD",
        "EUR",
        "GBP",
        "JPY",
        "AUD",
        "CAD"
    ],
    "interestPresetOptions": [
        "Custom",
        "NACM (Compounded Monthly)",
        "NACQ (Compounded Quarterly)",
        "NACA (Compounded Annually)",
        "NACW (Compounded Weekly)",
        "NACD (Compounded Daily)"
    ],
    "interestNominalRatePeriods": [
        "Annually",
        "Monthly",
        "Quarterly",
        "Weekly",
        "Daily"
    ],
    "interestCalculationMethods": [
        "Compound",
        "Simple"
    ],
    "interestCompoundingIntervals": [
        "Monthly",
        "Quarterly",
        "Annually",
        "Weekly",
        "Daily"
    ],
    "interestModal": {
        "title": "Edit Interest Settings",
        "dataField": "interest",
        "actions": {
            "add": false,
            "edit": true,
            "delete": false,
            "save": true
        },
        "columns": [
            {
                "field": "id",
                "header": "ID",
                "editable": false,
                "type": "number",
                "display": false
            },
            {
                "field": "presetOption",
                "header": "Standard Calculation",
                "editable": true,
                "type": "select",
                "optionsSource": "interestPresetOptions",
                "default": "Custom",
                "display": true
            },
            {
                "field": "nominalRate",
                "header": "Nominal Rate (%)",
                "editable": true,
                "type": "number",
                "default": 0,
                "display": true
            },
            {
                "field": "effectiveRate",
                "header": "Effective Rate (EAR) (%)",
                "editable": true,
                "type": "number",
                "default": 0,
                "display": true
            },
            {
                "field": "nominalRatePeriod",
                "header": "Nominal Rate Period",
                "editable": true,
                "type": "select",
                "optionsSource": "interestNominalRatePeriods",
                "default": "Annually",
                "display": true
            },
            {
                "field": "calculationMethod",
                "header": "Calculation Method",
                "editable": true,
                "type": "select",
                "optionsSource": "interestCalculationMethods",
                "default": "Simple",
                "display": true
            },
            {
                "field": "compoundingInterval",
                "header": "Compounding Interval",
                "editable": true,
                "type": "select",
                "optionsSource": "interestCompoundingIntervals",
                "default": "Monthly",
                "display": true
            }
        ],
        "fieldDefaults": {
            "Custom": {
                "presetOption": "Custom"
            },
            "NACM (Compounded Monthly)": {
                "presetOption": "NACM (Compounded Monthly)",
                "nominalRatePeriod": "Annually",
                "calculationMethod": "Compound",
                "compoundingInterval": "Monthly"
            },
            "NACQ (Compounded Quarterly)": {
                "presetOption": "NACQ (Compounded Quarterly)",
                "nominalRatePeriod": "Annually",
                "calculationMethod": "Compound",
                "compoundingInterval": "Quarterly"
            },
            "NACA (Compounded Annually)": {
                "presetOption": "NACA (Compounded Annually)",
                "nominalRatePeriod": "Annually",
                "calculationMethod": "Compound",
                "compoundingInterval": "Annually"
            },
            "NACW (Compounded Weekly)": {
                "presetOption": "NACW (Compounded Weekly)",
                "nominalRatePeriod": "Annually",
                "calculationMethod": "Compound",
                "compoundingInterval": "Weekly"
            },
            "NACD (Compounded Daily)": {
                "presetOption": "NACD (Compounded Daily)",
                "nominalRatePeriod": "Annually",
                "calculationMethod": "Compound",
                "compoundingInterval": "Daily"
            }
        },
        "formulas": {
            "nominalRate": {
                "onChange": "effectiveRate = Math.pow(1 + nominalRate/100/constants.periods[compoundingInterval], constants.periods[compoundingInterval]) - 1"
            },
            "effectiveRate": {
                "onChange": "nominalRate = (Math.pow(1 + effectiveRate, 1/constants.periods[compoundingInterval]) - 1) * constants.periods[compoundingInterval] * 100"
            },
            "presetOption": {
                "onChange": {
                    "nominalRatePeriod": "fieldDefaults[presetOption].nominalRatePeriod",
                    "calculationMethod": "fieldDefaults[presetOption].calculationMethod",
                    "compoundingInterval": "fieldDefaults[presetOption].compoundingInterval"
                }
            }
        },
        "constants": {
            "periods": {
                "Monthly": 12,
                "Quarterly": 4,
                "Annually": 1,
                "Weekly": 52,
                "Daily": 365,
                "default": 12
            }
        }
    }
}